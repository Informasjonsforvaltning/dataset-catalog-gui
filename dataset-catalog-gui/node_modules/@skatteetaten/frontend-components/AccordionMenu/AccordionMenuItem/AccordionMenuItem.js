import * as React from 'react';
import { Icon } from '../../Icon';
import classnames from 'classnames';
import { getClassNames } from '../AccordionMenu.classNames';

/*
 * visibleName AccordionMenuItem (Element i trekkspillmeny)
 */
export const AccordionMenuItem = props => {
  const styles = getClassNames(props);
  const {
    heading,
    icon,
    onClick,
    className,
    children,
    ariaLabel
  } = props;
  const [isContentOpen, setContentOpen] = React.useState(props.isOpen || false);

  const toggleVisibility = () => {
    setContentOpen(!isContentOpen);
  };

  const clickHandler = () => {
    if (onClick && !isContentOpen) {
      onClick();
    }

    toggleVisibility();
  };

  return /*#__PURE__*/React.createElement("li", {
    className: className,
    "aria-label": ariaLabel
  }, /*#__PURE__*/React.createElement("button", {
    onClick: clickHandler,
    className: isContentOpen ? classnames(styles.menuItem, styles.menuItemIsOpen) : styles.menuItem,
    "aria-expanded": isContentOpen
  }, /*#__PURE__*/React.createElement("div", {
    className: styles.menuItemTitle
  }, /*#__PURE__*/React.createElement(Icon, {
    iconName: icon,
    className: styles.iconWrapper
  }), /*#__PURE__*/React.createElement("div", {
    className: styles.title
  }, heading)), /*#__PURE__*/React.createElement("div", {
    className: isContentOpen ? classnames(styles.toggleButton, styles.toggleButtonOpen) : styles.toggleButton
  }, /*#__PURE__*/React.createElement(Icon, {
    iconName: "ChevronDown"
  }))), isContentOpen && /*#__PURE__*/React.createElement("section", {
    className: styles.content
  }, children));
};